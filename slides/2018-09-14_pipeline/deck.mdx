import { Head, Image } from 'mdx-deck'
import { CodeSurfer } from "mdx-deck-code-surfer"
import { Container, Row, Col } from 'react-grid-system'
import Top from '../../components/Top.js'
import SandBox from './components/SandBox'

export { default as theme } from '../../theme'

<Top
  title="pipeline operator"
  twitterImage="https://i.gyazo.com/f0494cffefb029477b92c4be2bea7646.png"
  eventName="#WeJS @24th"
/>

---
# è‡ªå·±ç´¹ä»‹
---
<img src="https://i.gyazo.com/87d23d84bc93c83bb165c9d2f239f703.png" width="275"/>

- CureApp
- ã‚¢ãƒ—ãƒªã§åŒ»ç™‚æ©Ÿå™¨ã‚’ä½œã£ã¦ã‚‹
- RN, react, Node.js, MongoDB

---
# TL;DR
---
# pipeline operator â˜º ï¸
---
# pipeline operator is ä½• ??
---
# |>
---
### sandbox
<SandBox
  initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
/>

---
### [Proposed Solutions](https://babeljs.io/blog/2018/07/19/whats-happening-with-the-pipeline-proposal#proposed-solutions)

- "minimal" -  Minimal Pipeline (ã•ã£ãã®)
- "fsharp" -  F#-Style Pipeline (Coming Soon!)
- "smart" -  Smart Pipeline (Coming Soon!)

---
### fsharp
<div>
  <p style={{ fontSize: 20 }}>(å‹•ã‹ãªã„ã€‚ã€‚ã€‚)</p>
  <SandBox
    initial={`
Promise.resolve({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await // <- ã“ã‚Œï¼
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
  />
</div>

---
### smart
<div>
  <p style={{ fontSize: 20 }}>(å‹•ã‹ãªã„ã€‚ã€‚ã€‚)</p>
  <SandBox
    initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await # // <- ã“ã‚Œï¼
  |> Object.values
  |> #.join('') // <- ã“ã‚Œï¼
  |> alert`}
  />
</div>

---
mapã—ã¦ã¿ã‚‹
---
### map
<SandBox
  initial={`
[1, 2, 3]
  |> (a => a.map(n => n * 2))
  |> JSON.stringify
  |> alert`}
/>

---
### R.map
<SandBox
  initial={`
const { map } = R;
[1, 2, 3]
  |> map(n => n * 2) // <-
  |> JSON.stringify
  |> alert`}
/>

```notes
ã¾ãŸã„ã¤ã‹ä½¿ã„ãŸã„
<CodeSurfer
  title='OOP ã¨ FP'
  code={require("!raw-loader!./assets/codes/oop_vs_fp.js")}
  showNumbers
  steps={[
    { ranges: [[1,11]], notes: 'OOPã ã¨ã“ã†ï¼Ÿ' },
    { ranges: [[14,22]], notes: 'FPã ã¨ã“ã†ï¼Ÿ' },
    { ranges: [[1,11]], notes: 'OOP' },
    { range: [2,8], notes: 'classå®šç¾©ã—ã¦' },
    { lines: [10], notes: 'ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œã£ã¦' },
    { lines: [11], notes: 'ä½¿ã†' },
    { ranges: [[14,22]], notes: 'FP' },
    { ranges: [[15,19]], notes: 'å‹ã¨é–¢æ•°ã‚’å®šç¾©ã—ã¦' },
    { lines: [21], notes: 'ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œã£ã¦' },
    { lines: [22], notes: 'ä½¿ã†' },
    { lines: [11,22], notes: 'ä½¿ã„å¿ƒåœ°' },
    { ranges: [[15,21]], notes: 'æ§‹é€ çš„éƒ¨åˆ†å‹' },
  ]}
/>
```

---
# [Ramda](https://ramdajs.com/)

---
##### (ã‚¿ã‚¤ãƒã˜ã‚ƒãªã„ã‚ˆã€‚ã€‚ã€‚)

---
<img src="https://i.gyazo.com/0fb75025d51989473b6823fd31da7906.png" width="207"/>

---
lodashã¿ãŸã„ãªã‚‚ã®
---
- Immutability and side-effect free
- automatically curried
- convenience for currying

---
### ramda map
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_map.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda map (curry)
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_map-curry.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda groupBy
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_groupBy.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda sort
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_sort.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda tap
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_tap.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
pipe, pipeP, compose, composeP, curry, R.__, cond, evolve, ...

---
ã¾ã ã¾ã æŠŠæ¡ã§ãã¦ãªã„é–¢æ•°ãŒã€‚ã€‚

---
ã—ã‹ã—ã“ã‚Œæœ¬æ°—ã§ä½¿ã†ã¨ãƒã‚¸ã§é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°çµ„ã‚ã‚‹ã®ã‹ã‚‚ ğŸ¤”

---
### å€‹äººã®æ„è¦‹
ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚³ãƒ¼ãƒ‰ã§ã‚„ã‚Šãã‚‹ã®çµæ§‹ã‚¢ãƒ¬ãªã®ã§ã¯ï¼Ÿ

è¶£å‘³ã‚³ãƒ¼ãƒ‰ãªã‚‰ã¨ã‚‚ã‹ãã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚³ãƒ¼ãƒ‰ã§ã¯ lodash/fs ãŒä¸­åº¸ãªæ„Ÿã˜ãŒã€‚ã€‚ã€‚

---
# Ramda â˜º ï¸

---
ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ï¼
