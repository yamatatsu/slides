import { Head, Image } from 'mdx-deck'
import { CodeSurfer } from "mdx-deck-code-surfer"
import { Container, Row, Col } from 'react-grid-system'
import Top from '../../components/Top.js'
import SandBox from './components/SandBox'

export { default as theme } from '../../theme'

<Top
  title="pipeline operator"
  twitterImage="https://i.gyazo.com/f0494cffefb029477b92c4be2bea7646.png"
  eventName="#WeJS @24th"
/>

---
# 自己紹介
---
<img src="https://i.gyazo.com/87d23d84bc93c83bb165c9d2f239f703.png" width="275"/>

- CureApp
- アプリで医療機器を作ってる
- RN, react, Node.js, MongoDB

---
# TL;DR
---
# pipeline operator ☺ ️
---
# pipeline operator is 何 ??
---
# |>
---
### sandbox
<SandBox
  initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
/>

---
### [Proposed Solutions](https://babeljs.io/blog/2018/07/19/whats-happening-with-the-pipeline-proposal#proposed-solutions)

- "minimal" -  Minimal Pipeline (さっきの)
- "fsharp" -  F#-Style Pipeline (Coming Soon!)
- "smart" -  Smart Pipeline (Coming Soon!)

---
### fsharp
<div>
  <p style={{ fontSize: 20 }}>(動かない。。。)</p>
  <SandBox
    initial={`
Promise.resolve({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await // <- これ！
  |> Object.values
  |> (a => a.join(''))
  |> alert`}
  />
</div>

---
### smart
<div>
  <p style={{ fontSize: 20 }}>(動かない。。。)</p>
  <SandBox
    initial={`
({
  first:'pipe',
  second:'line',
  third:'!!!',
})
  |> await # // <- これ！
  |> Object.values
  |> #.join('') // <- これ！
  |> alert`}
  />
</div>

---
mapしてみる
---
### map
<SandBox
  initial={`
[1, 2, 3]
  |> (a => a.map(n => n * 2))
  |> JSON.stringify
  |> alert`}
/>

---
### R.map
<SandBox
  initial={`
const { map } = R;
[1, 2, 3]
  |> map(n => n * 2) // <-
  |> JSON.stringify
  |> alert`}
/>

```notes
またいつか使いたい
<CodeSurfer
  title='OOP と FP'
  code={require("!raw-loader!./assets/codes/oop_vs_fp.js")}
  showNumbers
  steps={[
    { ranges: [[1,11]], notes: 'OOPだとこう？' },
    { ranges: [[14,22]], notes: 'FPだとこう？' },
    { ranges: [[1,11]], notes: 'OOP' },
    { range: [2,8], notes: 'class定義して' },
    { lines: [10], notes: 'インスタンス作って' },
    { lines: [11], notes: '使う' },
    { ranges: [[14,22]], notes: 'FP' },
    { ranges: [[15,19]], notes: '型と関数を定義して' },
    { lines: [21], notes: 'オブジェクト作って' },
    { lines: [22], notes: '使う' },
    { lines: [11,22], notes: '使い心地' },
    { ranges: [[15,21]], notes: '構造的部分型' },
  ]}
/>
```

---
# [Ramda](https://ramdajs.com/)

---
##### (タイポじゃないよ。。。)

---
<img src="https://i.gyazo.com/0fb75025d51989473b6823fd31da7906.png" width="207"/>

---
lodashみたいなもの
---
- Immutability and side-effect free
- automatically curried
- convenience for currying

---
### ramda map
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_map.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda map (curry)
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_map-curry.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda groupBy
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_groupBy.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda sort
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_sort.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
### ramda tap
<Container style={{ width: 1000 }}>
  <Row>
    <Col sm={12} md={6}>
      <SandBox
        initial={require("!raw-loader!./assets/codes/ramda_tap.js")}
      />
    </Col>
    <Col sm={12} md={6}>
      <p><a href='https://lodash.com/docs/4.17.10'>lodash docs</a></p>
      <p><a href='https://github.com/lodash/lodash/tree/4.17.10-npm/fp'>lodash fp</a></p>
      <p><a href='https://ramdajs.com/docs/'>ramda docs</a></p>
    </Col>
  </Row>
</Container>

---
pipe, pipeP, compose, composeP, curry, R.__, cond, evolve, ...

---
まだまだ把握できてない関数が。。

---
しかしこれ本気で使うとマジで関数型プログラミング組めるのかも 🤔

---
### 個人の意見
プロダクトコードでやりきるの結構アレなのでは？

趣味コードならともかく、プロダクトコードでは lodash/fs が中庸な感じが。。。

---
# Ramda ☺ ️

---
ご清聴ありがとうございました！！
